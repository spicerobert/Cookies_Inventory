# 餅乾禮盒生產排程系統 - 系統設計規劃文件

## 一、系統目標

建立一個能自動建議生產排程的系統，並能隨時因應庫存和需求重新調整生產排程，重點解決：
- 餅乾生產跟不上禮盒組裝計畫的問題
- 減少換線時間損失（集中生產策略）
- 確保齊料組裝規劃
- 每週檢視庫存和銷售現況，動態調整排程

## 二、系統核心邏輯

### 2.1 核心原則
1. **拉式生產（Pull Production）**：後段組裝計畫拉動前段餅乾生產
2. **集中生產策略**：將同款餅乾需求合併，減少換線次數（最小批量1000片）
3. **齊料優先**：優先生產能讓最多禮盒達到齊料狀態的餅乾
4. **動態調整**：每週滾動式檢視，重新制定排程

### 2.2 生產約束條件
- **餅乾生產線**：3條產線，製程類似，可視為同質產線
- **工作時間**：每週6天，每天10小時（含員工休息時間）
- **最小批量**：1000片/批次
- **換線時間**：標準0.5小時（需確認是否有特殊換線邏輯）
- **餅乾保存期限**：120天（消費者要求至少45天，目前距離春節<60天，暫時不考慮效期控管）
- **前置天數**：每種餅乾從投料到完工所需的生產天數

## 三、系統輸入資料需求清單

### 3.1 已確認會提供的資料（8項）

#### 1. 禮盒組成表 (BOM)
- 禮盒名稱/代號
- 內含餅乾代號
- 每盒需要的餅乾片數

#### 2. 工藝路徑與產能 (Routing & Capacity)
**前段（餅乾生產）：**
- 每一種餅乾每小時的產量（片/小時）
- 換線所需時間（標準0.5小時）

**後段（禮盒組裝）：**
- 每款禮盒組裝的速度（盒/小時/人）
- 每日可作業的班次與總人數

#### 3. 庫存即時狀態 (Inventory Status)
- 目前餅乾的庫存數量
- 禮盒成品數量
- 每一種餅乾從投料到完工所需的生產天數（前置天數，假設原料充足）

#### 4. 訂單與預測 (Demand Data)
- 已確認的訂單 (Firm Orders)
- 銷售預測 (Forecast)
- 每一款禮盒的總目標銷售數量（可換算成每一款餅乾的總生產數量）

#### 5. 出貨預測 (Shipping Forecast)
- 出貨日期/週別
- 禮盒代號
- 預估出貨數量
- 目的：先出貨的禮盒先預做組裝和庫存，後出貨的禮盒延後組裝，提高保質期並減輕庫存壓力

#### 6. 餅乾生產參數表 (Production Specs)
- 各款餅乾的產線歸屬（3條產線）
- 每一條生產線在標準工時下的最大產能
- 備註：不需要考慮生產參數差異，3條產線視為相同

#### 7. 庫存現況表 (Current Inventory)
- 現有餅乾庫存（分批次/生產日期）
- 現有禮盒庫存

#### 8. 組裝線產能 (Assembly Capacity)
- 後段組裝線每天最大能處理多少盒（決定前段餅乾要跑多快）

### 3.2 還需要補充的資料（3項關鍵問題）

#### ⚠️ 問題1：換線邏輯與產品家族 (Changeover Matrix / Product Families)
**需求說明：**
雖然標準換線時間為0.5小時，但在實際生產中，不同餅乾之間的切換可能有不同的清洗要求。

**需要確認：**
- 是否有某些餅乾屬於同一「產品家族」（例如：同樣是奶油基底，只是口味不同）？
- 同一家族內的餅乾換線是否只需要簡單清理（15-20分鐘）？
- 跨類別的切換（例如：從「鹹味」換到「甜味」，或從「含堅果」換到「不含堅果」）是否需要更徹底的清洗（可能需要更長時間）？

**目的：**
- 系統會自動尋找「換線代價最小」的組合來排列生產順序
- 優化10小時工單的排列，減少總換線時間

**建議提供格式：**
| 餅乾代號 | 產品家族/分類 | 換線類別 | 備註 |
|---------|--------------|---------|------|
| A001    | 奶油系列-原味 | I類    | 同類換線15分鐘 |
| A002    | 奶油系列-香草 | I類    | 同類換線15分鐘 |
| B001    | 巧克力系列   | II類   | 與I類換線需0.5小時 |
| ...     | ...          | ...     | ... |

或者提供簡單的分類規則，例如：
- 甜味類（不需要清洗）
- 鹹味類（需要清洗）
- 含堅果類（需要徹底清洗）

---

#### ⚠️ 問題2：組裝線的人力與款式切換限制 (Assembly Line Constraints)
**需求說明：**
後段組裝線的產能雖然已提供（盒/小時/人），但需要了解款式切換的實際限制。

**需要確認：**
- 在一天10小時內，組裝線是否可以隨時切換禮盒款式？
- 切換禮盒款式是否需要「換線時間」？（例如：需要把輸送帶上的餅乾全部換掉、調整包裝材料等）
- 如果切換款式需要時間，大約需要多久？

**目的：**
- 如果組裝線換款也需要時間，系統就不會建議一天組裝太多款禮盒
- 系統會傾向「今天下午專攻A禮盒，明天專攻B禮盒」的策略
- 避免頻繁切換導致產能損失

**建議提供資訊：**
- 組裝線切換禮盒款式是否需要時間？____分鐘
- 一天內建議最多切換幾次款式？____次
- 是否有其他組裝線的特殊限制？

---

#### ⚠️ 問題3：齊料分配的優先序權重 (Allocation Priority Rules)
**需求說明：**
當餅乾產能跟不上需求時，系統需要知道如何分配有限的餅乾產能。

**情境範例：**
假設有兩款禮盒（A和B）都需要餅乾X，但餅乾X的產量只夠供給其中一款，系統應該如何判斷優先順序？

**需要確認優先序規則（可多選或排序）：**

**選項A：出貨日期優先**
- 出貨日期越近的禮盒，優先分配餅乾
- 適合情況：確保能準時出貨

**選項B：訂單類別優先**
- 已確認的訂單 > 銷售預測
- 適合情況：確保已接單的客戶不會被影響

**選項C：組裝效率優先**
- 哪款禮盒差的餅乾種類最少，先湊齊它
- 適合情況：快速讓組裝線開工，避免閒置

**選項D：禮盒單價優先**
- 單價越高的禮盒優先
- 適合情況：追求營業額最大化

**選項E：其他規則**
- 請說明：_________________

**目的：**
- 建立「自動調整」時的權重演算法
- 當系統偵測到產能不足時，能夠自動決定哪些禮盒優先齊料

**建議提供格式：**
請將以上選項按重要性排序（例如：1. 選項A, 2. 選項B, 3. 選項C），或提供具體的權重百分比。

---

## 四、系統輸出（自動建議項目）

系統將提供以下自動化建議：

### 4.1 餅乾生產排程建議
- 每日各產線的生產計畫
- 每款餅乾的建議生產時間和數量
- 生產順序建議（優化換線次數）

### 4.2 組裝計畫調整建議
- 當餅乾產能不足時，建議調整組裝順序
- 標示哪些禮盒因為餅乾未齊料需要延後組裝

### 4.3 齊料缺口分析
- 紅色警示：庫存不足以支撐未來3天組裝的餅乾
- 黃色警示：庫存不足以支撐未來7天組裝的餅乾
- 顯示哪些禮盒因為缺哪些餅乾而無法組裝

### 4.4 產能負荷分析
- 產線產能使用率
- 產能不足時的自動警示
- 建議的加班時數（如果需要）

## 五、系統運作流程（每週調整）

### 5.1 每週檢視流程
1. **需求校準**：讀取最新的出貨預測和訂單
2. **可行性評估**：檢查組裝計畫的齊料狀態
3. **缺口分析**：計算餅乾生產缺口
4. **優先權評估**：根據權重規則計算各餅乾的生產優先權
5. **排程優化**：自動生成餅乾生產排程建議
6. **組裝調整**：如有必要，建議調整組裝計畫

### 5.2 關鍵演算法邏輯
- **需求展開（MRP展開）**：將禮盒需求展開成餅乾需求
- **需求合併（Batching）**：將未來7-14天的需求合併，確保最小批量
- **序列優化**：根據換線矩陣，排列生產順序以減少換線時間
- **齊料優先權計算**：生產哪款餅乾能讓最多禮盒達到齊料狀態

## 六、下一步行動

### 6.1 待確認事項
請先確認並提供上述**問題1、問題2、問題3**的答案。

### 6.2 資料準備
請開始準備上述8項資料，建議優先提供：
1. BOM（禮盒組成表）
2. 出貨預測
3. 庫存現況表

可以先提供2-3項資料的範例（Excel欄位或格式），我們可以先建立邏輯模型來驗證系統設計是否符合您的需求。

### 6.3 邏輯驗證測試
建議先用簡單的測試資料（例如：2款禮盒、5-8種餅乾、10天的組裝計畫）來跑一次邏輯流程，確保系統建議的餅乾生產順序符合現場經驗。

---

## 附錄：關鍵參數摘要

| 參數項目 | 數值/規則 | 備註 |
|---------|---------|------|
| 生產線數量 | 3條 | 視為同質產線 |
| 工作時間 | 每週6天，每天10小時 | 含休息時間，扣除換線時間 |
| 最小生產批量 | 1000片 | 低於此數量不划算 |
| 標準換線時間 | 0.5小時 | 需確認是否有特殊換線邏輯 |
| 餅乾總效期 | 120天 | 目前階段暫不考慮效期控管 |
| 消費者允出效期 | 45天 | 目前階段暫不考慮效期控管 |
| 調整頻率 | 每週檢視 | 動態調整排程 |
| 核心痛點 | 餅乾生產跟不上組裝計畫 | 需要重新調整兩者排程 |

---

**文件建立日期**：2024年
**最後更新**：2024年

